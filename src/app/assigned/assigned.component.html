<app-header></app-header>
<app-aside></app-aside>

<main id="main" class="main" data-aos="fade-in" data-aos-duration="600">
  <!-- Titre -->
  <div class="pagetitle mb-3" data-aos="fade-down" data-aos-duration="700">
    <h1 class="fw-bold text-dark"><i class="bi bi-tools me-2"></i>Assigner une PM</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#"><i class="bi bi-person-fill"></i> User</a></li>
        <li class="breadcrumb-item active"><i class="bi bi-list-task"></i> Liste</li>
      </ol>
    </nav>
  </div>

  <!-- Formulaire -->
  <div class="container" style="max-width: 800px;" data-aos="zoom-in-up" data-aos-duration="800">
    <div class="card p-3 border-0 shadow-sm">
      <h5 class="fw-semibold text-primary mb-4" data-aos="fade-up" data-aos-delay="100">
        <i class="bi bi-calendar-plus-fill me-2"></i>Planification d'une Maintenance Pr√©ventive
      </h5>

      <form [formGroup]="pmForm" (ngSubmit)="assignPM()">
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label fw-semibold text-muted">
              <i class="bi bi-geo-alt-fill me-1 text-primary"></i>Site
            </label>
            <select class="form-select" formControlName="siteId" required>
                <option value="">-- Choisir un site --</option>
                <option *ngFor="let site of sites" [value]="site.id">
                  {{ site.siteId }} - {{ site.name }}
                </option>
              </select>
              
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold text-muted">
              <i class="bi bi-calendar-event-fill me-1 text-primary"></i>Date de la PM
            </label>
            <input type="date" class="form-control" formControlName="plannedDate" />
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label fw-semibold text-muted">
              <i class="bi bi-person-workspace me-1 text-primary"></i>FME
            </label>
            <select class="form-select" formControlName="fmeId">
                <option value="">-- Choisir un FME --</option>
                <option *ngFor="let user of fme" [value]="user.id">{{ user.fullName }}</option>
              </select>


        
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold text-muted">
              <i class="bi bi-gear-wide-connected me-1 text-primary"></i>Type de PM
            </label>
            <select class="form-select" formControlName="pmType">
              <option value="">-- Choisir un type --</option>
              <option value="250H">250H</option>
              <option value="500H">500H</option>
              <option value="1000H">1000H</option>
            </select>
          </div>
        </div>

        <div class="text-end">
          <button type="submit" class="btn btn-primary" [disabled]="pmForm.invalid">
            <i class="bi bi-send-fill me-2"></i>Assigner la PM
          </button>
        </div>
      </form>
    </div>
  </div>
</main>

<app-footer></app-footer>
