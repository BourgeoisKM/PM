<app-header></app-header>
<app-aside></app-aside>

<main id="main" class="main">
  <!-- Titre de la page -->
  <div class="pagetitle" data-aos="fade-down">
    <h1>Assign a PM</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">User</a></li>
        <li class="breadcrumb-item active">Liste</li>
      </ol>
    </nav>
  </div>

  <!-- Contenu principal -->
  <div class="container py-4">
    <div class="text-center mb-4" data-aos="zoom-in">
      <h2 class="text-primary fw-bold">List of PMs</h2>
      <p class="text-muted">PM Planned</p>
    </div>

    <!-- Alerte si aucune PM -->
    <div *ngIf="paginatedSchedules.length === 0" class="alert alert-warning text-center" data-aos="fade-in">
      Aucune PM assignée.
    </div>

    <!-- Cartes des PMs -->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <div class="col" *ngFor="let pm of paginatedSchedules" data-aos="fade-up" data-aos-delay="100">
        <div class="card shadow-sm border border-2 border-info">
          <div class="card-body">
            <h5 class="card-title text-success fw-bold">{{ pm.siteName || 'Site inconnu' }}</h5>
            <p class="card-text">
              <strong>Date prévue :</strong> {{ pm.plannedDate | date: 'longDate' }}<br>
              <strong>Type :</strong> <span class="badge bg-info text-dark">{{ pm.pmType }}</span><br>
              <strong>Ticket :</strong> {{ pm.ticket }}<br>
              <strong>Statut :</strong> {{ pm.isUsed }}<br>
              <strong>FME :</strong> {{ pm.fmeName }}
            </p>
          </div>
          <div class="card-footer text-muted text-end">
            <span class="badge bg-danger text-white">Assigné</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <nav *ngIf="totalPages > 1" class="mt-4 d-flex justify-content-center" data-aos="fade-up" data-aos-delay="300">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)">Précédent</a>
        </li>
        <li
          class="page-item"
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="currentPage === i + 1">
          <a class="page-link" (click)="changePage(i + 1)">{{ i + 1 }}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)">Suivant</a>
        </li>
      </ul>
    </nav>
  </div>
</main>

<app-footer></app-footer>
